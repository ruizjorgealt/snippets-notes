
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='Certbot.html'>Certbot</a>, Previous: <a href='Module 2  AWS Core Services.html'>Module 2: AWS Core Services</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>NGINX</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><h3>What is Nginx?</h3><div><ul><li>High performance web server</li><li>Excels at servicing static content</li><li>Load balancer</li></ul></div></div><div class="cell text-cell"><h3>Comparing Nginx to Apache</h3><div><u>What do they have in common?</u></div><div><ul><li>Both are free and open source software</li><li>Community of users review the code</li><li>Added functionality through dynamic modules</li><li>Both can be configured as proxy servers</li><li>Event-based processing for large numbers of connections</li></ul><div>Differences</div></div></div><div class="cell markdown-cell"><table>
<thead>
<tr>
<th>Apache</th>
<th>NGINX</th>
</tr>
</thead>
<tbody>
<tr>
<td>Configuration: XML syntax</td>
<td>Configuration: C-like syntax</td>
</tr>
<tr>
<td>Distributed .htaccess files</td>
<td>Centralized location blocks</td>
</tr>
<tr>
<td>Dynamic content is natively processed with modules</td>
<td>Dynamic content requires external processing</td>
</tr>
<tr>
<td>Static content is less efficient</td>
<td>Static content is more efficient</td>
</tr>
<tr>
<td>Caching and load balancing capabilities with modules</td>
<td>Native caching and load balancing capabilities</td>
</tr>
</tbody>
</table>
</div><div class="cell text-cell"><h3>Why Choose Nginx?</h3><div><ul><li>Its popularity is growing</li><li>It’s efficient</li><li>It has consisten performance under heavy load</li><li>It’s easier to configure than apache</li></ul></div></div><div class="cell text-cell"><h3>Install and Configure NGINX</h3><hr>You need to install Nginx</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">install</span> <span class="ace_identifier">nginx</span>
</div></div></div></div><div class="cell text-cell">Check the status of the Nginx running process</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">systemctl</span> <span class="ace_identifier">status</span> <span class="ace_identifier">nginx</span>
</div></div></div></div><div class="cell text-cell"><h3>Nginx Files and Directories</h3><hr>Get familiar with some of the files and directories that are key to running Nginx</div><div class="cell text-cell">Directory that holds that configuration files</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span>
</div></div></div></div><div class="cell text-cell">The main configuration file:</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">conf</span>
</div></div></div></div><div class="cell text-cell">We will also encounter some familiar directories that function almost the same as with Apache2; the following directories are used for virtual hosts</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">sites</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">available</span><span class="ace_keyword ace_operator">/</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">sites</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">enabled</span><span class="ace_keyword ace_operator">/</span>
</div></div></div></div><div class="cell text-cell">In the <code></code><code>/etc/nginx/sites-available</code><code></code> directory you will find the default vhost that is used to display the default nginx welcome page.</div><div class="cell text-cell"><b><u>Other important directories for storing log files and serving web content include:</u></b></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span>
</div></div></div></div><div class="cell text-cell">and&nbsp;</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">www</span><span class="ace_keyword ace_operator">/</span>
</div></div></div></div><div class="cell text-cell"><b>Managing Nginx throught the Command-Line:</b></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">systemctl</span> <span class="ace_identifier">stop</span> <span class="ace_identifier">nginx</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">systemctl</span> <span class="ace_identifier">start</span> <span class="ace_identifier">nginx</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">systemctl</span> <span class="ace_identifier">status</span> <span class="ace_identifier">nginx</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">systemctl</span> <span class="ace_identifier">reload</span> <span class="ace_identifier">nginx</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">service</span> <span class="ace_identifier">nginx</span> <span class="ace_identifier">start</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">service</span> <span class="ace_identifier">nginx</span> <span class="ace_identifier">stop</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">service</span> <span class="ace_identifier">nginx</span> <span class="ace_identifier">restart</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">service</span> <span class="ace_identifier">nginx</span> <span class="ace_identifier">reload</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">graceful</span>
</div></div></div></div><div class="cell text-cell"><b>Using Nginx Command Directly</b></div><div class="cell text-cell">To get a list of the switches (Show us flags to use with the nginx command):</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">nginx</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">h</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">Usage</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">nginx</span> <span class="ace_paren ace_lparen">[</span><span class="ace_keyword ace_operator">-</span><span class="ace_punctuation ace_operator">?</span><span class="ace_identifier">hvVtTq</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">[</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">s</span> <span class="ace_support ace_function ace_C99 ace_c">signal</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">[</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">c</span> <span class="ace_identifier">filename</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">[</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">p</span> <span class="ace_identifier">prefix</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">[</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">g</span> <span class="ace_identifier">directives</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">Options</span><span class="ace_punctuation ace_operator">:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_punctuation ace_operator">?,</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">h</span>         <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">this</span> <span class="ace_identifier">help</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">v</span>            <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">show</span> <span class="ace_identifier">version</span> <span class="ace_keyword ace_operator">and</span> <span class="ace_support ace_function ace_C99 ace_c">exit</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">V</span>            <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">show</span> <span class="ace_identifier">version</span> <span class="ace_keyword ace_operator">and</span> <span class="ace_identifier">configure</span> <span class="ace_identifier">options</span> <span class="ace_identifier">then</span> <span class="ace_support ace_function ace_C99 ace_c">exit</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">t</span>            <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">test</span> <span class="ace_identifier">configuration</span> <span class="ace_keyword ace_operator">and</span> <span class="ace_support ace_function ace_C99 ace_c">exit</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">T</span>            <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">test</span> <span class="ace_identifier">configuration</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">dump</span> <span class="ace_identifier">it</span> <span class="ace_keyword ace_operator">and</span> <span class="ace_support ace_function ace_C99 ace_c">exit</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">q</span>            <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">suppress</span> <span class="ace_identifier">non</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">error</span> <span class="ace_identifier">messages</span> <span class="ace_identifier">during</span> <span class="ace_identifier">configuration</span> <span class="ace_identifier">testing</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">s</span> <span class="ace_support ace_function ace_C99 ace_c">signal</span>     <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">send</span> <span class="ace_support ace_function ace_C99 ace_c">signal</span> <span class="ace_identifier">to</span> <span class="ace_identifier">a</span> <span class="ace_identifier">master</span> <span class="ace_identifier">process</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">stop</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">quit</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">reopen</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">reload</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">p</span> <span class="ace_identifier">prefix</span>     <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">set</span> <span class="ace_identifier">prefix</span> <span class="ace_identifier">path</span> <span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_control">default</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">share</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">c</span> <span class="ace_identifier">filename</span>   <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">set</span> <span class="ace_identifier">configuration</span> <span class="ace_identifier">file</span> <span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_control">default</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">conf</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">g</span> <span class="ace_identifier">directives</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">set</span> <span class="ace_identifier">global</span> <span class="ace_identifier">directives</span> <span class="ace_identifier">out</span> <span class="ace_identifier">of</span> <span class="ace_identifier">configuration</span> <span class="ace_identifier">file</span>
</div></div></div></div><div class="cell text-cell"><h3>Nginx Main Configuration File</h3><hr>&nbsp;</div><div class="cell text-cell">This config file is located at</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">conf</span>
</div></div></div></div><div class="cell text-cell">The default configuration file should look like this:</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">user</span> <span class="ace_identifier">www</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">data</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">worker_processes</span> <span class="ace_storage ace_type">auto</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">pid</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">run</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">pid</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">include</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">modules</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">enabled</span><span class="ace_comment">/*.conf;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">events {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    worker_connections 768;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # multi_accept on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">http {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # Basic Settings</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    sendfile on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    tcp_nopush on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    tcp_nodelay on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    keepalive_timeout 65;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    types_hash_max_size 2048;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # server_tokens off;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # server_names_hash_bucket_size 64;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # server_name_in_redirect off;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    include /etc/nginx/mime.types;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    default_type application/octet-stream;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # SSL Settings</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ssl_prefer_server_ciphers on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # Logging Settings</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    access_log /var/log/nginx/access.log;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    error_log /var/log/nginx/error.log;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # Gzip Settings</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    gzip on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # gzip_vary on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # gzip_proxied any;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # gzip_comp_level 6;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # gzip_buffers 16 8k;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # gzip_http_version 1.1;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    # Virtual Host Configs</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    ##</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    include /etc/nginx/conf.d/*.conf;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_comment">    include /etc/nginx/sites-enabled/*;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#mail {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       # See sample authentication script at:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       # auth_http localhost/auth.php;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       # pop3_capabilities "TOP" "USER";</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       # imap_capabilities "IMAP4rev1" "UIDPLUS";</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       server {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#               listen     localhost:110;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#               protocol   pop3;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#               proxy      on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       server {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#               listen     localhost:143;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#               protocol   imap;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#               proxy      on;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#       }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#}</span>
</div></div></div></div><div class="cell text-cell">Individual configurations for individual projects can be read from <code>/etc/nginx/conf.d</code> and <code>/etc/nginx/sites-enabled</code></div><div class="cell text-cell">Test virtual host <code>liberatualma.conf</code> on the <code>/etc/nginx/nginx.d/</code> directory; notice that could have been stored on <code>sites-available</code> and then enabled to appear on <code>sites-enabled</code></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">server</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">listen</span> <span class="ace_constant ace_numeric">80</span> <span class="ace_identifier">default_server</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">server_name</span> <span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span> <span class="ace_identifier">www</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">index</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">root</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">www</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">html</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">liberatualma</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">We add the "<font color="#323232" style="background-color: rgb(254, 250, 0);">default_server</font>" statement to tell nginx to use this server configuration if no other configurations match the name of the site being requested.</div><div class="cell text-cell"><h3>Location Directive</h3><hr>Location directives allows us to extend our configuration based on URI or a Uniform Resource Indicator that makes up the request being processed by the server.</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">server</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">location</span> <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">modifier</span><span class="ace_paren ace_rparen">]</span> <span class="ace_identifier">location_definition</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_punctuation ace_operator">...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">modifier</span><span class="ace_paren ace_rparen">]</span> <span class="ace_identifier">location_definition</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">When we define a location, we use the location keyboard, an optional modifier and a required location definition. Location directives are formatted as blocks and are defined inside server blocks. They can also be nested inside other location blocks.</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span> <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">try_files</span> <span class="ace_identifier">$uri</span> <span class="ace_identifier">$uri</span><span class="ace_keyword ace_operator">/</span> <span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">404</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">We will add the URI variable followed by a slash. To test for any directories that might match. We will also add =404 to tell Nginx to serve a 404 error if no file or directory matches the URI being requested.</div><div class="cell text-cell"><div>Checks the existence of files in the specified order and uses the first found file for request processing; the processing is performed in the current context. [...] If none of the files were found, an internal redirect to the uri specified in the last parameter is made.</div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">images</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">autoindex</span> <span class="ace_identifier">on</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">The auto index directive will let the browser list the files in that directory (Open directory). This means that we will be able to see the files in that directory from a browser.</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">404</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">500</span> <span class="ace_constant ace_numeric">502</span> <span class="ace_constant ace_numeric">503</span> <span class="ace_constant ace_numeric">504</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">We can also use locations to server custom error pages</div><div class="cell text-cell"><b>Final virtual host file example:</b></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">server</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">listen</span> <span class="ace_constant ace_numeric">80</span> <span class="ace_identifier">default_server</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">server_name</span> <span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span> <span class="ace_identifier">www</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">index</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">htm</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">php</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">root</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">www</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">html</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">liberatualma</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">try_files</span> <span class="ace_identifier">$uri</span> <span class="ace_identifier">$uri</span><span class="ace_keyword ace_operator">/</span> <span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">404</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">images</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">autoindex</span> <span class="ace_identifier">on</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">404</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">500</span> <span class="ace_constant ace_numeric">502</span> <span class="ace_constant ace_numeric">503</span> <span class="ace_constant ace_numeric">504</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">To log activity add the <b><u><font color="#323232" style="background-color: rgb(254, 250, 0);">log directives</font></u></b> to your virtual host</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">access_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">access</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">error_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">error</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></div><div class="cell text-cell">The complete virtual host should look like this:</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">server</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">listen</span> <span class="ace_constant ace_numeric">80</span> <span class="ace_identifier">default_server</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">server_name</span> <span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span> <span class="ace_identifier">www</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">index</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">htm</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">php</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">root</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">www</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">html</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">liberatualma</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">access_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">access</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">error</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">try_files</span> <span class="ace_identifier">$uri</span> <span class="ace_identifier">$uri</span><span class="ace_keyword ace_operator">/</span> <span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">404</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">images</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">autoindex</span> <span class="ace_identifier">on</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">access_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">access</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">error_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">error</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">404</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">500</span> <span class="ace_constant ace_numeric">502</span> <span class="ace_constant ace_numeric">503</span> <span class="ace_constant ace_numeric">504</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><h3>Troubleshooting Nginx</h3><hr></div><div class="cell text-cell">Catch using nginx configuration errors using the configuration testing flag</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">nginx</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">t</span>
</div></div></div></div><div class="cell text-cell">Also check check for typos in your server name and root directives</div><div class="cell text-cell">Site can’t be reached?<div><ul><li>Make sure Nginx is running</li><li>Reload Nginx configuration</li><li>Verify that ports open</li><ul><li><span style="font-family: Menlo, Consolas, &quot;Ubuntu Mono&quot;, Monaco, source-code-pro, monospace; font-size: 11.699999809265137px; background-color: rgba(0, 0, 0, 0.0392157);">sudo lsof -P -n -i :80 -i :443 | grep LISTEN</span><br></li><li><span style="font-family: Menlo, Consolas, &quot;Ubuntu Mono&quot;, Monaco, source-code-pro, monospace; font-size: 11.699999809265137px; background-color: rgba(0, 0, 0, 0.0392157);">sudo netstat -plan | grep nginx</span></li></ul><li>Tail the logs</li><ul><li><code>tail -f /var/logs/nginx/*.log</code></li></ul><li>Seek online help</li></ul></div></div><div class="cell text-cell"><h1>The LEMP Stack</h1><hr>The term stack describes the environment where these sites and apps are developed and served from.</div><div class="cell text-cell"><img src="resources/40D4FB3D6110233DC9B8528C992388C3.jpg" alt="stack-2.jpg" width="302" height="315">&nbsp; &nbsp; &nbsp; &nbsp;<img src="resources/48E7571C5D80AAE57B6DF67829C95F05.jpg" alt="stack.jpg" width="302" height="315"><br></div><div class="cell text-cell">Installing the LEMP stack:</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">install</span> <span class="ace_identifier">php</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">fpm</span> <span class="ace_identifier">php</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">mysql</span> 
</div></div></div></div><div class="cell text-cell">Make sure the PHP fast CGI process manager is running:</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">systemctl</span> <span class="ace_identifier">status</span> <span class="ace_identifier">php7</span><span class="ace_punctuation ace_operator">.</span><span class="ace_constant ace_numeric">2</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">fpm</span>
</div></div></div></div><div class="cell text-cell">We now need to edit our conf file so that Nginx can communicate with PHP. We add the following directives in our virtual host.</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">~</span> \<span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">php$</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">include</span> <span class="ace_identifier">snippets</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">fastcgi</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">php</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">conf</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fastcgi_pass</span> <span class="ace_identifier">unix</span><span class="ace_punctuation ace_operator">:</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">run</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">php</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">php7</span><span class="ace_punctuation ace_operator">.</span><span class="ace_constant ace_numeric">2</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">fpm</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">sock</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fastcgi_intercept_errors</span> <span class="ace_identifier">on</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell">Now install the dabase component of the LEMP stack</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">install</span> <span class="ace_identifier">mariadb</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span> <span class="ace_identifier">mariadb</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">client</span>
</div></div></div></div><div class="cell text-cell"><b>Securing Database Installation</b><div>Steps required for production systems</div><div><ul><li>Set a root password</li><li>Disable remote connections for the root account</li><li>Remove anonymous accounts</li></ul></div></div><div class="cell text-cell">To secure you database installation run: <code>mysql_secure_installation</code></div><div class="cell text-cell"><b><u><font color="#323232" style="background-color: rgb(254, 250, 0);">At this point our virtual host should look like this</font></u></b></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">server</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">listen</span> <span class="ace_constant ace_numeric">80</span> <span class="ace_identifier">default_server</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">server_name</span> <span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span> <span class="ace_identifier">www</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">jorgearuiz</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">net</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">index</span> <span class="ace_identifier">index</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span> <span class="ace_identifier">info</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">php</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">root</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">www</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">html</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">liberatualma</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">access_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">access</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">error</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">try_files</span> <span class="ace_identifier">$uri</span> <span class="ace_identifier">$uri</span><span class="ace_keyword ace_operator">/</span> <span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">404</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">~</span> \<span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">php$</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">include</span> <span class="ace_identifier">snippets</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">fastcgi</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">php</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">conf</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fastcgi_pass</span> <span class="ace_identifier">unix</span><span class="ace_punctuation ace_operator">:</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">run</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">php</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">php7</span><span class="ace_punctuation ace_operator">.</span><span class="ace_constant ace_numeric">2</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">fpm</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">sock</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fastcgi_intercept_errors</span> <span class="ace_identifier">on</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">images</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">autoindex</span> <span class="ace_identifier">on</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">access_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">access</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">error_log</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">nginx</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">libera</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">error</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_C99 ace_c">log</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">404</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span><span class="ace_constant ace_numeric">404.</span><span class="ace_identifier">html</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">error_page</span> <span class="ace_constant ace_numeric">500</span> <span class="ace_constant ace_numeric">502</span> <span class="ace_constant ace_numeric">503</span> <span class="ace_constant ace_numeric">504</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">location</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword ace_operator">/</span>50<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">html</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">internal</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = 'Certbot.html';
if (e.keyCode === 37) window.location.href = 'Module 2  AWS Core Services.html';
}</script>
    </body>
    </html>
  